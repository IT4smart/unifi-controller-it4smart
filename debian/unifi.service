[Unit]
Description=Unifi Controller
After=docker.service
Requires=docker.service

[Service]
TimeoutStartSec=0
Restart=always
ExecStartPre=-/usr/bin/docker stop unifi-rpi
ExecStartPre=-/usr/bin/docker rm unifi-rpi
ExecStartPre=/usr/bin/docker pull ryansch/unifi-rpi:5.14.23
ExecStart=/usr/bin/docker run --name unifi-rpi --volume config:/var/lib/unifi --network host ryansch/unifi-rpi:5.14.23

[Install]
Alias=unifi
WantedBy=multi-user.target
